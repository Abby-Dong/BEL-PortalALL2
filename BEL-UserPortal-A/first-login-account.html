<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - BEL Portal</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- Header Component -->
    <header class="bel-header">
        <i class="bel-hamburger-menu fas fa-bars" id="bel-hamburger-btn"></i>
        <div class="bel-header-content">
            <div class="bel-sidebar-logo">
                <img src="https://irp.cdn-website.com/56869327/dms3rep/multi/iotmart-logo.svg" alt="logo">
                <span>BEL Portal</span>
            </div>
            <div class="bel-header-right">
                <div class="bel-notification-bell" id="notification-bell">
                    <i class="fas fa-bell"></i>
                    <div class="dot"></div>
                </div>
                <div class="bel-notification-panel" id="notification-panel">
                    <div class="bel-notification-header">Announcements</div>
                    <ul class="bel-notification-list">
                        <li class="bel-notification-item">
                            <div class="bel-notification-title"><span class="tag" style="background-color: var(--ds-color-success-light); color: var(--ds-color-success);">Welcome</span>Welcome to BEL Partner Program!</div>
                            <div class="bel-notification-date">2025-09-18</div>
                        </li>
                        <li class="bel-notification-item">
                            <div class="bel-notification-title"><span class="tag new-product">New Campaign</span>ADAM Remote I/O Series are now available for promotion</div>
                            <div class="bel-notification-date">2025-08-25</div>
                        </li>
                    </ul>
                </div>
                <div class="bel-language-selector" id="language-selector">
                    <i class="fas fa-globe"></i>
                </div>
                <div class="bel-language-panel" id="language-panel">
                    <ul class="bel-language-list">
                        <li class="bel-language-item" data-lang="en">
                            <div class="bel-language-name">English</div>
                        </li>
                        <li class="bel-language-item" data-lang="zh">
                            <div class="bel-language-name">繁體中文</div>
                        </li>
                    </ul>
                </div>
                <div class="bel-user-profile">
                    <img src="https://irp.cdn-website.com/56869327/dms3rep/multi/AVATAR-G.png" alt="User Avatar">
                </div>
                <div class="user-profile-panel" id="user-profile-panel">
                    <div class="panel-content">
                        <div class="user-info">
                            <span class="user-name">New User</span>
                            <span class="user-email">newuser@example.com</span>
                        </div>
                        <div class="user-level">
                            <span class="bel-badge builder"><i class="fas fa-seedling"></i> Builder</span>
                        </div>
                        <hr class="divider">
                        <a href="first-login-account.html" class="panel-link">My Account</a>
                        <a href="#" class="panel-link">Log Out</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="bel-container">
        <!-- Sidebar Component -->
        <aside class="bel-sidebar" id="bel-sidebar">
            <div class="bel-sidebar-menu-title">MAIN MENU</div>
            <nav class="bel-sidebar-nav">
                <a href="first-login.html" class="bel-sidebar-nav-link"><i class="fas fa-tachometer-alt fa-fw"></i><span>Sales Engagement</span></a>
                <a href="first-login-earnings.html" class="bel-sidebar-nav-link"><i class="fas fa-wallet fa-fw"></i><span>Earnings & Orders</span></a>
                <a href="first-login-account.html" class="bel-sidebar-nav-link active"><i class="fas fa-user-circle fa-fw"></i><span>My Account</span></a>
            </nav>
            <div class="bel-sidebar-menu-title">HELP & SUPPORT</div>
            <nav class="bel-sidebar-nav">
                <a href="first-login-support-faq.html" class="bel-sidebar-nav-link"><i class="fas fa-question-circle fa-fw"></i><span>Talk to Admin</span></a>
                <a href="first-login-resource-center.html" class="bel-sidebar-nav-link"><i class="fas fa-folder fa-fw"></i><span>Get Resource</span></a>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="bel-main-content" id="bel-main-content">
            <h1 class="bel-h1">My Account</h1>
            
            <!-- Priority Task Banner -->
            <div class="notice-banner">
                <div class="notice-banner-content">
                    <i class="fas fa-exclamation-circle notice-banner-icon"></i>
                    <div class="notice-banner-text">
                        <h3>Complete Your Banking Information</h3>
                        <p>Complete your banking information to receive commission payments. This information is required for first-time setup and can be modified later through support.</p>
                    </div>
                </div>
            </div>

            <div class="bel-panel" id="account-profile-panel">
                
                <!-- Profile Layout -->
                <div class="profile-layout-container">
                    <!-- Left: Avatar -->
                    <div class="profile-avatar-section-new">
                        <div class="profile-avatar-wrapper">
                            <img id="profile-avatar-img" src="https://irp.cdn-website.com/56869327/dms3rep/multi/AVATAR-G.png" alt="Profile Avatar" class="profile-avatar-image">
                            <button class="profile-avatar-edit-btn" id="avatar-edit-btn" style="display: none;">
                                <i class="fas fa-pen"></i>
                            </button>
                        </div>
                        <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                    </div>

                    <!-- Center: User Info -->
                    <div class="profile-user-info">
                        <!-- Display Mode -->
                        <div id="profile-display-info" class="profile-display-mode">
                            <h2 id="profile-display-name" class="profile-user-name">Maxwell Walker</h2>
                            <p id="profile-display-email" class="profile-user-email">Maxwell.Walker@example.com</p>
                        </div>
                        <!-- Edit Mode (hidden by default) -->
                        <div id="profile-edit-info" class="profile-edit-mode" style="display: none;">
                            <input type="text" id="profile-input-name" class="profile-input-name" value="Maxwell Walker">
                            <input type="email" id="profile-input-email" class="profile-input-email" value="Maxwell.Walker@example.com">
                        </div>
                    </div>

                    <!-- Right: Action Buttons -->
                    <div class="profile-actions">
                        <!-- Default Edit Button -->
                        <button id="profile-edit-button" class="bel-btn primary profile-edit-btn-main">
                            <i class="fas fa-edit bel-mr-4"></i>
                            Edit Profile
                        </button>
                        <!-- Edit Mode Buttons (hidden by default) -->
                        <div id="profile-edit-actions" class="profile-edit-actions-group" style="display: none;">
                            <button id="profile-save-button" class="bel-btn primary profile-save-btn">
                                <i class="fas fa-check bel-mr-4"></i>
                                Save Changes
                            </button>
                            <button id="profile-cancel-button" class="bel-btn secondary profile-cancel-btn">
                                <i class="fas fa-times bel-mr-4"></i>
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bel-panel editable-panel bel-mt-24" id="payout-info-panel">
                <div class="panel-header">
                    <h3>Payout Information</h3>
                    <div>
                        <a href="#" id="payout-info-help" class="bel-help-link">
                            <i class="fas fa-question-circle bel-mr-4" style="margin-right: 4px;"></i>How to Modify?
                        </a>
                    </div>
                </div>
     
                <!-- Banking Form -->
                <form class="banking-form" id="banking-form">
                    <!-- First row: Account Holder Name | Phone Number (50% each) -->
                    <div class="bel-grid-container grid-cols-2 bel-mb-8">
                        <div class="bel-form-group">
                            <label for="account-holder-name">Account Holder Name <span class="required-asterisk">*</span></label>
                            <input type="text" id="account-holder-name" placeholder="Full name as on bank account" required style="color: var(--ds-color-gray-80);">
                        </div>
                        <div class="bel-form-group">
                            <label for="phone-number">Phone Number <span class="required-asterisk">*</span></label>
                            <input type="tel" id="phone-number" placeholder="Enter phone number" required style="color: var(--ds-color-gray-80);">
                        </div>
                    </div>
                    <!-- Second row: Bank Name | SWIFT Code | Account Number (33% each) -->
                    <div class="bel-grid-container grid-cols-3 bel-mb-8">
                        <div class="bel-form-group">
                            <label for="bank-name">Bank Name <span class="required-asterisk">*</span></label>
                            <input type="text" id="bank-name" placeholder="Your bank name" required style="color: var(--ds-color-gray-80);">
                        </div>
                        <div class="bel-form-group">
                            <label for="swift-code">SWIFT Code <span class="required-asterisk">*</span></label>
                            <input type="text" id="swift-code" placeholder="Bank SWIFT code" required style="color: var(--ds-color-gray-80);">
                        </div>
                        <div class="bel-form-group">
                            <label for="account-number">Account Number <span class="required-asterisk">*</span></label>
                            <input type="text" id="account-number" placeholder="Your bank account number" required style="color: var(--ds-color-gray-80);">
                        </div>
                    </div>
                    <!-- Third row: Address (full width) -->
                    <div class="bel-grid-container bel-mb-8">
                        <div class="bel-form-group">
                            <label for="address">Address <span class="required-asterisk">*</span></label>
                            <textarea id="address" rows="3" placeholder="Complete address for bank account verification" required style="resize: vertical; min-height: 80px; width: 100%; color: var(--ds-color-gray-80);"></textarea>
                        </div>
                    </div>

                                    <!-- Disclaimer Notice -->
                <div class="disclaimer-notice" style="background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; padding: 12px 16px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: flex-start; gap: 8px;">
                        <i class="fas fa-exclamation-triangle" style="color: #856404; margin-top: 2px; font-size: 14px;"></i>
                        <div style="flex: 1;">
                            <p style="color: #856404; font-size: 13px; margin: 0; line-height: 1.4;">
                               By submitting this form, you represent and warrant that all banking information provided is complete, accurate, and current. The Company disclaims all liability for any losses, failed transactions, verification delays, or compliance issues arising from inaccurate or incomplete details. Please ensure all information is verified prior to submission.
                        </div>
                    </div>
                </div>    
                    <!-- Form Actions -->
                    <div class="form-actions" style="margin-top: 24px; text-align: right;">
                        <button type="submit" class="bel-btn primary">
                            <i class="fas fa-save" style="margin-right: 6px;"></i>
                            Submit Banking Information
                        </button>
                    </div>
                </form> 
            </div>

            <h3 class="bel-h3">Account Settings</h3>
            <div class="bel-panel">
                <div class="settings-row" id="language-setting-row">
                    <div class="icon"><i class="fas fa-globe"></i></div>
                    <div class="text-content">
                        <h4>Language</h4>
                        <p>General preferences for web</p>
                    </div>
                    <div class="current-value" id="language-current-value">English</div>
                    <div id="language-select-group">
                        <select id="language-select" class="bel-language-select">
                            <option value="English">English</option>
                            <option value="Traditional Chinese">繁體中文</option>
                            <option value="Korean">한국어</option>
                        </select>
                        <button class="bel-btn bel-save-btn" id="save-language-btn">Save</button>
                    </div>
                    <div class="arrow" id="language-arrow"><i class="fas fa-chevron-right"></i></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Profile Success Modal -->
    <div class="modal-overlay" id="profile-success-modal">
        <div class="modal-content bel-max-w-400">
            <div class="bel-modal-center">
                <div class="bel-mb-20">
                    <i class="fas fa-check-circle bel-success-icon"></i>
                </div>
                <h3 class="bel-modal-title">Changes Saved Successfully</h3>
                <p class="bel-modal-text">
                    Your account information has been updated successfully.
                </p>
                <button class="bel-btn primary profile-success-modal-close">Continue</button>
            </div>
        </div>
    </div>

    <!-- Banking Success Modal -->
    <div class="modal-overlay" id="banking-success-modal">
        <div class="modal-content bel-max-w-400">
            <div class="bel-modal-center">
                <div class="bel-mb-20">
                    <i class="fas fa-check-circle bel-success-icon"></i>
                </div>
                <h3 class="bel-modal-title">Banking Information Saved!</h3>
                <p class="bel-modal-text">
                    Your banking information has been saved successfully. Your account is now ready to receive commission payouts.
                </p>
                <button class="bel-btn primary banking-success-modal-close">Continue</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmation-modal">
        <div class="modal-content bel-max-w-600">
            <div class="modal-header">
                <h3>Confirm Banking Information</h3>
            </div>
            <div>
                <p class="bel-modal-text" style="margin: 0px;">
                    Please review your banking information carefully. Once confirmed, this information cannot be changed without contacting support.
                </p>
                
                <div class="confirmation-details">
                    <div class="detail-row">
                        <label>Account Holder Name:</label>
                        <span id="confirm-account-holder"></span>
                    </div>
                    <div class="detail-row">
                        <label>Phone Number:</label>
                        <span id="confirm-phone"></span>
                    </div>
                    <div class="detail-row">
                        <label>Bank Name:</label>
                        <span id="confirm-bank-name"></span>
                    </div>
                    <div class="detail-row">
                        <label>SWIFT Code:</label>
                        <span id="confirm-swift"></span>
                    </div>
                    <div class="detail-row">
                        <label>Account Number:</label>
                        <span id="confirm-account-number"></span>
                    </div>
                    <div class="detail-row">
                        <label>Address:</label>
                        <span id="confirm-address"></span>
                    </div>
                </div>
                
                <div class="bel-security-notice-container" style="margin: 20px 0; display: flex; flex-direction: column; align-items: flex-start;">
                    <div>
                        <div style="display: flex; align-items: center; margin-bottom: 4px;">
                            <i class="fas fa-exclamation-triangle bel-warning-icon"></i>
                            <span class="bel-security-title">Important Notice</span>
                        </div>
                    </div>
                    <p class="bel-modal-text-no-margin">
                        After confirmation, changes to banking information will require identity verification through our support team for security reasons.
                    </p>
                </div>


                <div style="display: flex; justify-content: flex-end;">
                    <button class="bel-btn secondary" id="cancel-confirmation" style="margin-right: 12px;">Cancel</button>
                    <button class="bel-btn primary" id="confirm-banking">Confirm & Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Payout Information Help Modal -->
    <div class="modal-overlay" id="payout-info-modal">
        <div class="modal-content bel-max-w-500">
            <div class="modal-header">
                <h3>Payout Information Policy</h3>
            </div>
            <div>
                <p class="bel-modal-text-no-margin">
                    For security and payment processing reasons, payout information can only be set during first login and cannot be modified afterwards.
                </p>
                <p class="bel-modal-text-no-margin"style="margin-bottom: 20px;">
                    If you need to update your information, please contact our <a href="support-faq.html" class="bel-color-link">support team</a> with identity verification.
                </p>
                <div style="display: flex; justify-content: flex-end;">
                    <button class="bel-btn primary modal-close-button">I Understand</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/data-loader.js"></script>
    <script src="js/common.js"></script>
    
    <script>
        // Check if banking information is already saved and disable form if necessary
        document.addEventListener('DOMContentLoaded', function() {
            checkBankingStatus();
            
            const bankingCompleted = localStorage.getItem('bel_banking_completed');
            if (bankingCompleted === 'true') {
                lockBankingForm();
            }

            // Setup new profile handlers
            setupNewProfileHandlers();
        });

        // Setup new profile form handlers
        function setupNewProfileHandlers() {
            // Get DOM elements
            const displayInfo = document.getElementById('profile-display-info');
            const editInfo = document.getElementById('profile-edit-info');
            const displayName = document.getElementById('profile-display-name');
            const displayEmail = document.getElementById('profile-display-email');
            const inputName = document.getElementById('profile-input-name');
            const inputEmail = document.getElementById('profile-input-email');
            const editButton = document.getElementById('profile-edit-button');
            const editActions = document.getElementById('profile-edit-actions');
            const saveButton = document.getElementById('profile-save-button');
            const cancelButton = document.getElementById('profile-cancel-button');
            const avatarEditBtn = document.getElementById('avatar-edit-btn');
            const avatarUpload = document.getElementById('avatar-upload');
            const avatarImg = document.getElementById('profile-avatar-img');

            // Debug: Check if all elements are found
            console.log('Profile edit elements check:', {
                displayInfo: !!displayInfo,
                editInfo: !!editInfo,
                displayName: !!displayName,
                displayEmail: !!displayEmail,
                inputName: !!inputName,
                inputEmail: !!inputEmail,
                editButton: !!editButton,
                editActions: !!editActions,
                saveButton: !!saveButton,
                cancelButton: !!cancelButton
            });

            // Toggle edit mode function
            function toggleEditMode(isEditing) {
                console.log('toggleEditMode called with:', isEditing);
                
                if (isEditing) {
                    // Enter edit mode
                    if (displayInfo) displayInfo.style.display = 'none';
                    if (editInfo) editInfo.style.display = 'block';
                    if (editButton) editButton.style.display = 'none';
                    if (editActions) editActions.style.display = 'flex';
                    if (avatarEditBtn) avatarEditBtn.style.display = 'flex';
                    
                    // Sync current display values to inputs
                    if (inputName && displayName) inputName.value = displayName.textContent;
                    if (inputEmail && displayEmail) inputEmail.value = displayEmail.textContent;
                } else {
                    // Exit edit mode
                    if (displayInfo) displayInfo.style.display = 'block';
                    if (editInfo) editInfo.style.display = 'none';
                    if (editButton) editButton.style.display = 'inline-flex';
                    if (editActions) editActions.style.display = 'none';
                    if (avatarEditBtn) avatarEditBtn.style.display = 'none';
                }
            }

            // Edit button click handler
            if (editButton) {
                console.log('Setting up edit button click handler');
                editButton.addEventListener('click', function(e) {
                    console.log('Edit button clicked!');
                    e.preventDefault();
                    toggleEditMode(true);
                });
            } else {
                console.error('Edit button not found!');
            }

            // Save button click handler
            if (saveButton) {
                saveButton.addEventListener('click', function(e) {
                    console.log('Save button clicked!');
                    e.preventDefault();
                    
                    // Update display with input values
                    if (displayName && inputName) {
                        displayName.textContent = inputName.value || 'Maxwell Walker';
                    }
                    if (displayEmail && inputEmail) {
                        displayEmail.textContent = inputEmail.value || 'Maxwell.Walker@example.com';
                    }
                    
                    // Here you can add API call to save data
                    console.log('Profile updated:', {
                        name: inputName ? inputName.value : '',
                        email: inputEmail ? inputEmail.value : ''
                    });
                    
                    // Show success message (optional)
                    // You can add a toast notification here
                    
                    // Show profile success modal
                    document.getElementById('profile-success-modal').classList.add('show');
                    
                    toggleEditMode(false);
                });
            }

            // Cancel button click handler
            if (cancelButton) {
                cancelButton.addEventListener('click', function(e) {
                    console.log('Cancel button clicked!');
                    e.preventDefault();
                    toggleEditMode(false);
                });
            }

            // Avatar upload functionality
            if (avatarEditBtn && avatarUpload && avatarImg) {
                avatarEditBtn.addEventListener('click', function() {
                    avatarUpload.click();
                });

                avatarUpload.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        handleNewAvatarUpload(file, avatarImg);
                    }
                });
            }
        }

        // Handle avatar upload
        function handleNewAvatarUpload(file, imgElement) {
            // Validate file type
            const validTypes = ['image/jpeg', 'image/jpg', 'image/png'];
            if (!validTypes.includes(file.type)) {
                alert('Please upload a JPG or PNG file.');
                return;
            }

            // Validate file size (5MB limit)
            const maxSize = 5 * 1024 * 1024;
            if (file.size > maxSize) {
                alert('File size should be less than 5MB.');
                return;
            }

            // Create file reader
            const reader = new FileReader();
            reader.onload = function(e) {
                imgElement.src = e.target.result;
                console.log('Avatar uploaded successfully');
            };

            reader.onerror = function() {
                alert('Error reading file. Please try again.');
            };

            reader.readAsDataURL(file);
        }

        // Banking form functionality
        document.getElementById('banking-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Check if form is already locked
            if (localStorage.getItem('bel_banking_completed') === 'true') {
                return;
            }
            
            // Validate form
            if (!validateBankingForm()) {
                return;
            }
            
            // Show confirmation modal with form data
            showConfirmationModal();
        });
        
        function validateBankingForm() {
            const requiredFields = [
                'account-holder-name',
                'phone-number', 
                'bank-name',
                'swift-code',
                'account-number',
                'address'
            ];
            
            let isValid = true;
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    field.style.borderColor = '#dc3545';
                    isValid = false;
                } else {
                    field.style.borderColor = '#e0e0e0';
                }
            });
            
            if (!isValid) {
                alert('Please fill in all required fields.');
            }
            
            return isValid;
        }
        
        function showConfirmationModal() {
            // Populate confirmation modal with form data
            document.getElementById('confirm-account-holder').textContent = 
                document.getElementById('account-holder-name').value;
            document.getElementById('confirm-phone').textContent = 
                document.getElementById('phone-number').value;
            document.getElementById('confirm-bank-name').textContent = 
                document.getElementById('bank-name').value;
            document.getElementById('confirm-swift').textContent = 
                document.getElementById('swift-code').value;
            document.getElementById('confirm-account-number').textContent = 
                document.getElementById('account-number').value;
            document.getElementById('confirm-address').textContent = 
                document.getElementById('address').value;
            
            // Show confirmation modal
            document.getElementById('confirmation-modal').classList.add('show');
        }
        
        // Confirmation modal event listeners
        document.getElementById('cancel-confirmation').addEventListener('click', function() {
            document.getElementById('confirmation-modal').classList.remove('show');
        });
        
        document.getElementById('confirm-banking').addEventListener('click', function() {
            // Hide confirmation modal
            document.getElementById('confirmation-modal').classList.remove('show');
            
            // Save banking information
            saveBankingInformation();
        });
        
        // Modal close event listeners
        document.getElementById('profile-success-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('show');
            }
        });
        
        document.querySelector('.profile-success-modal-close').addEventListener('click', function() {
            document.getElementById('profile-success-modal').classList.remove('show');
        });
        
        document.getElementById('banking-success-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.classList.remove('show');
            }
        });
        
        document.querySelector('.banking-success-modal-close').addEventListener('click', function() {
            document.getElementById('banking-success-modal').classList.remove('show');
        });
        
        function saveBankingInformation() {
            // Mark banking task as completed in localStorage
            localStorage.setItem('bel_banking_completed', 'true');
            
            // Lock the form
            lockBankingForm();
            
            // Update UI indicators
            updateUIAfterSave();
            
            // Show success modal
            document.getElementById('banking-success-modal').classList.add('show');
        }
        
        function lockBankingForm() {
            const bankingForm = document.getElementById('banking-form');
            bankingForm.classList.add('disabled');
            
            // Disable all form inputs
            const formInputs = document.querySelectorAll('#banking-form input, #banking-form textarea, #banking-form select');
            formInputs.forEach(input => {
                input.disabled = true;
                input.style.backgroundColor = '#f8f9fa';
                input.style.color = 'var(--ds-color-gray-60)';
                input.style.cursor = 'not-allowed';
            });
            
            // Hide form actions
            const formActions = document.querySelector('.form-actions');
            if (formActions) {
                formActions.style.display = 'none';
            }
            
        }
        
        function updateUIAfterSave() {
            
            // Hide all notice banners after completion
            const noticeBanners = document.querySelectorAll('.notice-banner');
            noticeBanners.forEach(banner => {
                banner.style.display = 'none';
            });
            
            // Hide setup task modal
            const taskModal = document.getElementById('setup-task-modal');
            if (taskModal) {
                taskModal.style.display = 'none';
            }
        }
        
        // Scroll to banking section
        function scrollToBanking() {
            document.getElementById('payout-info-panel').scrollIntoView({ behavior: 'smooth' });
        }
    </script>

    <style>
        /* Placeholder styling */
        input::placeholder,
        textarea::placeholder {
            color: var(--ds-color-gray-50) !important;
            opacity: 1;
        }
        
        input::-webkit-input-placeholder,
        textarea::-webkit-input-placeholder {
            color: var(--ds-color-gray-50) !important;
        }
        
        input::-moz-placeholder,
        textarea::-moz-placeholder {
            color: var(--ds-color-gray-50) !important;
            opacity: 1;
        }
        
        input:-ms-input-placeholder,
        textarea:-ms-input-placeholder {
            color: var(--ds-color-gray-50) !important;
        }
        
        /* Fix textarea styling */
        #address {
            box-sizing: border-box;
            font-family: inherit;
            font-size: 1rem;
            line-height: 1.5;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
        }
        
        #address:focus {
            outline: none;
            border-color: var(--ds-color-primary);
            box-shadow: 0 0 0 2px rgba(243, 152, 0, 0.2);
        }
        
        /* Ensure form consistency */
        .banking-form input,
        .banking-form textarea {
            font-size: 1rem;
            font-family: inherit;
        }
        
        
        /* Fixed Task Modal Styles */
        .setup-task-modal {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 320px;
            background: white;
            border-radius: 4px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            border: 1px solid #e8ecef;
            z-index: 1000;
            transition: all 0.3s ease;
            display: none;
        }
        
        .setup-task-modal.minimized {
            width: 200px;
        }
        
        .setup-task-content {
            padding: 0;
        }
        
        .setup-task-header {
            display: flex;
            align-items: center;
            padding: 16px;
            background: #fef7e6;
            border-radius: 4px 4px 0 0;
            border-bottom: 1px solid #f0d7a7;
        }
        
        .task-icon {
            width: 32px;
            height: 32px;
            background: var(--ds-color-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            margin-right: 12px;
            flex-shrink: 0;
        }
        
        .task-text {
            flex: 1;
        }
        
        .task-title {
            font-weight: 600;
            font-size: 14px;
            color: var(--ds-color-gray-90);
            margin-bottom: 2px;
        }
        
        .task-subtitle {
            font-size: 12px;
            color: var(--ds-color-gray-80);
        }
        
        .task-close {
            width: 24px;
            height: 24px;
            border: none;
            background: transparent;
            color: var(--ds-color-gray-60);
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.2s ease;
        }
        
        .task-close:hover {
            background: rgba(0, 0, 0, 0.1);
            color: var(--ds-color-gray-80);
        }
        
        .setup-task-body {
            padding: 16px;
        }
        
        @media (max-width: 768px) {
            .setup-task-modal {
                width: 280px;
                bottom: 15px;
                right: 15px;
            }
            
            .setup-task-modal.minimized {
                width: 160px;
            }
        }
        
        /* Confirmation Modal Styles */
        .confirmation-details {
            background: #f8f9fa;
            border: 1px solid #e8ecef;
            border-radius: 4px;
            padding: 16px;
            margin: 16px 0;
        }
        
        .detail-row {
            display: flex;
            margin-bottom: 12px;
            align-items: flex-start;
        }
        
        .detail-row:last-child {
            margin-bottom: 0;
        }
        
        .detail-row label {
            font-weight: 600;
            color: var(--ds-color-gray-80);
            width: 140px;
            flex-shrink: 0;
            font-size: 0.9rem;
        }
        
        .detail-row span {
            color: var(--ds-color-gray-90);
            font-weight: 500;
            flex: 1;
            word-break: break-word;
            font-size: 0.9rem;
        }
        
        /* Disabled form styling */
        .banking-form.disabled input,
        .banking-form.disabled textarea {
            background-color: #f8f9fa !important;
            color: var(--ds-color-gray-60) !important;
            cursor: not-allowed !important;
            border-color: #e8ecef !important;
        }
        
        .banking-form.disabled .form-actions {
            display: none;
        }
    </style>
    
    <!-- Fixed Task Modal in Bottom Right -->
    <div id="setup-task-modal" class="setup-task-modal">
        <div class="setup-task-content">
            <div class="setup-task-header">
                <div class="task-icon">
                    <i class="fas fa-exclamation-circle"></i>
                </div>
                <div class="task-text">
                    <div class="task-title">Complete Setup</div>
                    <div class="task-subtitle">1 task remaining</div>
                </div>
                <button class="task-close" id="task-close-btn" title="Minimize (task will remain active)">
                    <i class="fas fa-minus"></i>
                </button>
            </div>
            <div class="setup-task-body" id="setup-task-body">
                <div class="task-item incomplete" data-task="banking">
                    <div class="task-item-content">
                        <div class="task-item-title">Banking Information</div>
                        <div class="task-item-desc">Set up your payout details, required to receive commission payments and earnings</div>
                    </div>
                    <button class="task-item-action" onclick="scrollToBankingSection()">
                        Complete
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Setup task modal management
        function checkBankingStatus() {
            const bankingCompleted = localStorage.getItem('bel_banking_completed');
            const taskModal = document.getElementById('setup-task-modal');
            
            if (bankingCompleted === 'true') {
                taskModal.style.display = 'none';
                // Hide notice banners if banking is already completed
                const noticeBanners = document.querySelectorAll('.notice-banner');
                noticeBanners.forEach(banner => {
                    banner.style.display = 'none';
                });
            } else {
                taskModal.style.display = 'block';
            }
        }
        
        function scrollToBankingSection() {
            const bankingSection = document.getElementById('banking-setup');
            if (bankingSection) {
                bankingSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        // Task modal minimize/restore functionality
        const taskModal = document.getElementById('setup-task-modal');
        const taskCloseBtn = document.getElementById('task-close-btn');
        const taskBody = document.getElementById('setup-task-body');
        let isMinimized = false;
        
        taskCloseBtn.addEventListener('click', function() {
            if (isMinimized) {
                taskBody.style.display = 'block';
                taskModal.classList.remove('minimized');
                taskCloseBtn.innerHTML = '<i class="fas fa-minus"></i>';
                taskCloseBtn.title = 'Minimize (task will remain active)';
                isMinimized = false;
            } else {
                taskBody.style.display = 'none';
                taskModal.classList.add('minimized');
                taskCloseBtn.innerHTML = '<i class="fas fa-plus"></i>';
                taskCloseBtn.title = 'Restore task panel';
                isMinimized = true;
            }
        });
        
        document.addEventListener('DOMContentLoaded', function() {
            checkBankingStatus();
        });
    </script>
</body>
</html>