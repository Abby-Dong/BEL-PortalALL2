# 聯絡支援 (`#contact-support`)

聯絡支援部分是一個客服單系統，供 BEL 提交查詢，並供管理員管理和追蹤這些請求。

## 功能

- **客服單系統**：允許 BEL 為其問題提交支援客服單。管理員可以檢視、管理和追蹤這些客服單的狀態。
- **客服單歷史**：提供所有已關閉或已解決的支援請求的存檔，以供將來參考。

## 使用者體驗 (User Experience)

- **結構化的客服單管理**：
    - **事件**：使用者進入此頁面。
    - **介面變化**：頁面顯示一個清晰的客服單列表，包含單號、主旨、提交者和狀態等關鍵資訊。未解決的客服單（open）會被置於頂部。
    - **用意**：幫助管理者立即識別出需要優先處理的支援請求。將關鍵資訊前置，減少了尋找重要客服單所需的時間，提高了回應效率。
- **無縫的狀態更新**：
    - **事件**：管理者在客服單詳情頁面中，點擊"Case close"狀態轉換。
    - **用意**：提供流暢、無中斷的操作體驗。自動儲存減少了使用者的操作步驟，並避免了因忘記儲存而導致的資料丟失，讓管理者可以專注於處理問題本身。
- **清晰的溝通歷史與情境式互動**：
    - **事件**：管理者點擊任一客服單項目。
    - **介面變化**：
        - **若客服單為「開啟 (Open)」狀態**：彈出一個互動視窗，其中包含完整的對話歷史，以及一個可供管理者輸入回覆的文字框和「送出」按鈕。
        - **若客服單為「已關閉 (Closed)」狀態**：彈出一個唯讀的視窗，僅顯示完整的對話歷史，沒有輸入框或送出按鈕。
    - **用意**：這種差異化設計確保了操作的精確性。對於進行中的客服單，管理者可以在同一個介面中快速查閱並回覆，提升效率。對於已結案的客服單，則變為純粹的歷史查閱功能，防止對已完成的案件進行誤操作，確保了資料的完整性。

### 互動式彈窗與邏輯 (IT 參考)

#### 1. 客服單詳情彈窗 (Support Ticket Details Popup)
- **觸發事件**: 管理者點擊任一客服單項目。
- **介面行為**: 彈出一個模態視窗，顯示該客服單的詳細內容與溝通歷史。
- **彈窗內容與判斷邏輯**:
    - **資料獲取**: 根據傳入的客服單 ID，從 `data/supportAndComm.json` 的 `tickets` 陣列中查找對應的物件。
    - **狀態顯示**: 顯示當前狀態（例如，Open, Closed）。
    - **溝通歷史區**: 一個可滾動的區域，按時間順序顯示所有來自 BEL 和管理者的訊息。
    - **條件式互動區 (Conditional Interaction Area)**:
        - **判斷條件**: `ticket.status !== 'Closed'`
        - **如果為 True (客服單未關閉)**:
            - 顯示一個文字區域 (Textarea) 供管理者輸入回覆。
            - 顯示一個「更新狀態」的下拉選單，選項包含「處理中」、「等待回覆」、「已解決」等。
            - 顯示「送出回覆」按鈕。
        - **如果為 False (客服單已關閉)**:
            - 不顯示文字輸入區、狀態更新選單和送出按鈕。
            - 可能會顯示一條提示訊息，如「此客服單已關閉」。
- **用意**: 這是此功能的核心。透過在同一個彈窗內根據客服單的 `status` 動態呈現不同的 UI，系統將「處理中」和「查閱歷史」兩種使用情境完美結合。這不僅簡化了介面，更重要的是建立了一個清晰的工作流程，防止管理者對已結案的客服單進行不必要的操作，確保了客服流程的嚴謹性。

## 資料來源

客服單資料來自 `data/supportAndComm.json` 中的 `tickets` 物件。

